(function(c){function mb(){A=c(window);$b=c("body");nb=c("body, html");t=c("<div />").addClass("jackbox-modal");u=c("<div />").addClass("jackbox-holder");wa=c("<div />").addClass("jackbox-wrapper");Q=c("<div />").addClass("jackbox-preloader");ba=c("<span />").addClass("jackbox-panel jackbox-panel-left");ja=c("<span />").addClass("jackbox-panel jackbox-panel-right");var a=l.createDocumentFragment();a.appendChild(wa[0]);a.appendChild(Q[0]);t[0].appendChild(a);a=l.createDocumentFragment();a.appendChild(ba[0]); a.appendChild(ja[0]);a.appendChild(u[0]);wa[0].appendChild(a);xa=c("<div />").addClass("jackbox-container");ka||(Ea=c("<span />").addClass("jackbox-pre-inside").appendTo(Q));la*=2;Sa=0;a=l.createDocumentFragment();ob&&(v=c(ob).hide(),a.appendChild(v[0]));a.appendChild(xa[0]);pb&&(w=c(pb).hide(),a.appendChild(w[0]));u[0].appendChild(a);qb=-(y+ya);ma=[];Fa=[];D=[];E=[];rb.each($c);N&&(c.address.internalChange(sb),c.address.externalChange(ad));ac=!0;Ga&&(N?setTimeout(Ga,250):Ga(),Ga=null);rb=Fa=ob=pb= ma=null}function $c(){var a=c(this).attr("data-group").split(" ").join("").toLowerCase();if(ka){for(var b=E.length,e=!1;b--;)if(E[b]===a){e=!0;break}e||bc(a)}else-1===E.indexOf(a)&&bc(a)}function bc(a){E[E.length]=a;Fa=[];c(".jackbox[data-group="+a+"]").each(cc);D[D.length]=Fa;Ta++}function cc(a){isNaN(a)?f=a:(f=c(this).data({id:a,cat:Ta}),Fa[a]=f);if(h=f.attr("href")||f.attr("data-href")){var b,a="#"!==h.charAt(0)?h.toLowerCase().split(".").pop():"html";if(b=-1!==h.search("youtube.com")?"youtube": -1!==h.search("vimeo.com")?"vimeo":"mp4"===a?"local":!1){if(f.data("type",b),!f.attr("data-thumbnail"))if("vimeo"===b){var e=f;c.getJSON("http://vimeo.com/api/v2/video/"+h.split("http://vimeo.com/")[1]+".json?callback=?",{format:"json"},function(a){e.attr("data-thumbnail",a[0].thumbnail_small)})}else"youtube"===b&&f.attr("data-thumbnail","http://img.youtube.com/vi/"+h.split("http://www.youtube.com/watch?v=")[1]+"/1.jpg")}else if("jpg"===a||"png"===a||"jpeg"===a||"gif"===a)f.data("type","image");else switch(a){case "mp3":f.data("type", "audio");break;case "swf":f.data("type","swf");break;case "html":f.data("type","html");break;default:f.data("type","iframe")}f.on("click.jackbox",bd);if(H=f.attr("data-description")){if(ma)if(a=ma.indexOf(H),-1===a){H=c(H);if(!H.length)return;ma[ma.length]=H}else H=ma[a];else if(H=c(H),!H.length)return;f.data("description",H)}}}function ad(a){if(ec){ec=!1;var b=l.URL.split("?url=");if(2===b.length){window.location=b[0]+"#/"+b[1];return}}clearTimeout(Ha);fc(a.value);-1!==z?gc?(gc=!1,sb()):Ha=setTimeout(sb, 750):R&&tb()}function sb(a){"object"===typeof a&&(clearTimeout(Ha),fc(a.value));-1!==z?hc():R&&tb()}function fc(a){F&&(!ca&&!za)&&n[d].removeClass("jb-thumb-active");"/"!==a?(a=a.split("/"),3===a.length?(d=parseInt(a[2],10)-1,isNaN(d)&&(d=0),da=a[1]):isNaN(a[1])?(d=0,da=a[1]):(d=parseInt(a[1],10)-1,da="/")):(da="/",d=0);if("/"!==da)for(a=Ta;a--;){if(E[a]===da){z=a;I=D[z].length;O=1!==I;break}}else z=-1;za=!1}function bd(a){a.stopPropagation();a.preventDefault();a=c(this).data();Ua(a.cat,a.id,!0)} function Ua(a,b,e){clearTimeout(Ha);if(!e){if(F)for(e=n.length;e--;)n[e].off("click.jackbox");ba.off(".jackbox");ja.off(".jackbox");B&&ub&&i.cjSwipe("unbindSwipe")}N?c.address.value(E[a]+"/"+(b+1)):(F&&(!ca&&!za)&&n[d].removeClass("jb-thumb-active"),d=b,z=a,I=D[z].length,O=1!==I,hc())}function vb(a){if(a&&(a.stopPropagation(),Ia))return!1;R&&(F&&!ca&&n[d].removeClass("jb-thumb-active"),d<D[z].length-1?d++:d=0,za=!0,Ua(z,d))}function wb(a){if(a&&(a.stopPropagation(),Ia))return!1;R&&(F&&!ca&&n[d].removeClass("jb-thumb-active"), 0<d?d--:d=D[z].length-1,za=!0,Ua(z,d))}function hc(){Va=D[z];if(f=Va[d])h=f.attr("href")||f.attr("data-href"),R?(Ia=!0,ic(),jc()):(R=!0,B||(nb.stop(),Sa=A.scrollTop()),t.appendTo($b).one("click.jackbox",kc),lc=t.parents().each(cd),mc||(mc=!0,xb=parseInt(u.css("padding-left"),10)+parseInt(u.css("padding-right"),10),Ja=parseInt(u.css("padding-top"),10)+parseInt(u.css("padding-bottom"),10),nc=parseInt(ba.css("width"),10)+14,Wa=Ja+la,yb=y+(ya<<1),Xa=parseInt(Q.css("margin-top"),10),oc=Xa-(yb>>1),pc=parseInt(u.css("padding-left"), 10),qc=parseInt(u.css("padding-top"),10),J=c(".jackbox-fullscreen"),J.length||(J=null),ea=!zb&&Ya&&O?0:qb,na=!B&&"safari"!==Za&&("webkitRequestFullScreen"in t[0]||"mozFullScreenEnabled"in l)),C=A.width(),K=A.height(),u.css({width:C,height:K,marginLeft:-(C>>1)-pc,marginTop:-(K>>1)-qc}),Jacked.fadeIn(t[0],{callback:dd}),rc=setTimeout(jc,250),wa.on("click.jackbox",sc))}function cd(){c(this).addClass("jackbox-overflow")}function ed(){c(this).removeClass("jackbox-overflow")}function dd(){A[0].scrollTo(0, 0)}function jc(){!Ab&&Ea&&(Ea.addClass("jackbox-pre-ready"),Ab=!0);F&&(n[d].addClass("jb-thumb-active"),ca?ca=!1:Bb(!1,!0));var a=f.attr("data-autoplay")?f.attr("data-autoplay"):tc,b=f.data("description")||null,e=f.attr("data-title")||"",dc;$a="true"===f.attr("data-scaleUp");ab=b?b.html():!1;S=f.data("type");e?(Cb=e,fa=escape(Cb)):(fa=!1,"undefined"!==typeof x&&(x.data("links")&&x.data("links").off(".jackbox"),x.empty()));B&&(ub="image"===S||"html"===S);"image"!==S&&uc();568<C?Q.css("margin-top", 0===ea?oc:Xa):Q.css("margin-top",Xa);wa.show();Q.addClass("jackbox-spin-preloader");switch(S){case "image":Ka=!0;i=c("<img />").addClass("jackbox-content").one("load.jackbox",La).prependTo(xa);i.attr("src",h);break;case "youtube":oa(fd.split("{url}").join(h.split("watch?v=")[1]).split("{autoplay}").join("true"===a?1:0));break;case "vimeo":oa(gd.split("{url}").join(h.substring(h.lastIndexOf("/"))).split("{autoplay}").join(a));break;case "local":b=Db();e=f.attr("data-flashHasPriority")?f.attr("data-flashHasPriority"): vc.toString();dc="false"===e&&na&&"firefox"!==Za;b=f.attr("data-poster")?b+f.attr("data-poster"):"false";oa(hd+"?video="+h+"&autoplay="+a+"&flashing="+e+"&width="+T+"&height="+U+"&poster="+b,!0);break;case "audio":Db();oa(id+"?audio="+h+"&title="+(f.attr("data-audiotitle")?f.attr("data-audiotitle"):fa)+"&autoplay="+a);break;case "swf":Db();oa(jd+"?swf="+h+"&width="+(j.toString()+"&height="+g.toString()));break;case "html":a=c(h);i=c("<div />").addClass("jackbox-content jackbox-html").html(a.length? a.html():"").prependTo(xa);i.css("width",j);f.attr("data-height",i.outerHeight(!0));uc();La();break;default:oa(h,!1,!0)}na&&(!dc?J.show():J.hide())}function Db(){if(-1===h.search("http")){var a=l.URL.split("#")[0];"/"!==a[a.length-1]&&(a=a.substring(0,a.lastIndexOf("/")+1));h=a+h;return a}}function kd(){ga.css("visibility","hidden")}function ld(){p.data("offLeft",p.offset().left)}function wc(){Aa.css({opacity:0,visibility:"hidden"})}function xc(a){"object"===typeof a&&a.stopPropagation();q<I-ha&& (q++,bb(!1,!0))}function yc(a){"object"===typeof a&&a.stopPropagation();0<q&&(q--,bb(!1,!0))}function md(a){a.stopPropagation();a=c(this).parent();a.addClass("jb-thumb-fadein");B||a.addClass("jb-thumb-hover");a.data("id")===d&&a.addClass("jb-thumb-active")}function zc(a){a.stopPropagation();if(Ia)return!1;a=c(this).data("id");a!==d&&(F&&n[d].removeClass("jb-thumb-active"),d=a,ca=!0,Ua(z,d))}function nd(){Ma?Ac():(A.off(".jackbox"),Ma=!0,l.mozFullScreenEnabled?(l.addEventListener("mozfullscreenchange", cb,!1),t[0].mozRequestFullScreen()):t[0].webkitRequestFullScreen&&(l.addEventListener("webkitfullscreenchange",cb,!1),t[0].webkitRequestFullScreen()))}function cb(){l.webkitIsFullScreen||l.mozFullScreen?L(!0):Ac(!0)}function Eb(a){l.removeEventListener(a.type,Eb,!1);L(!0);A.on("resize.jackbox",L)}function Ac(a){Ma=!1;l.mozFullScreenEnabled?(l.removeEventListener("mozfullscreenchange",cb,!1),a?(L(!0),A.on("resize.jackbox",L)):(l.addEventListener("mozfullscreenchange",Eb,!1),l.mozCancelFullScreen())): t[0].webkitRequestFullScreen&&(l.removeEventListener("webkitfullscreenchange",cb,!1),a?(L(!0),A.on("resize.jackbox",L)):(l.addEventListener("webkitfullscreenchange",Eb,!1),l.webkitCancelFullScreen()))}function uc(){Ka=!1;T=f.attr("data-width")?parseInt(f.attr("data-width"),10):Bc;U=f.attr("data-height")?parseInt(f.attr("data-height"),10):Cc;$a="true"===f.attr("data-scaleUp");Dc()}function Ec(){Fb=!1}function Dc(){db=T+xb+nc+la;Gb=U+Wa;L()}function ic(){clearTimeout(rc);Jacked.stopTween(u[0]);A.off(".jackbox"); i&&(Jacked.stopTween(i[0]),i.remove(),i=null);eb&&(eb.remove(),eb=null);v&&(Jacked.stopTween(v[0],!0),v.hide());w&&(Jacked.stopTween(w[0],!0),w.hide());r&&(r.removeClass("jb-info-inactive"),Jacked.stopTween(G[0]),G.empty().hide())}function kc(a){a.stopPropagation();N?c.address.value(""):tb()}function tb(){clearTimeout(Ha);ic();t.unbind(".jackbox");if(O){pa&&pa.off(".jackbox");qa&&qa.off(".jackbox");Na&&p&&p.off(".jackbox");Jacked.stopTween(ja[0],!0);Jacked.stopTween(ba[0],!0);var a={opacity:0,visibility:"hidden"}; ja.off(".jackbox").css(a);ba.off(".jackbox").css(a)}else ra&&ra.show(),s&&s.show();wa.hide().off(".jackbox");Q.removeClass("jackbox-spin-preloader");"undefined"!==typeof x&&(x.data("links")&&x.data("links").off(".jackbox"),x.empty());na&&J.off(".jackbox");sa&&sa.unbind(".jackbox");r&&r.off(".jackbox");if(F){Jacked.stopTween(V[0]);for(V.off(".jackbox").hide();n.length;)a=n[0],Jacked.stopTween(a[0]),a.remove(),n.shift();W.off(".jackbox").hide();X.off(".jackbox").hide();B&&p.cjSwipe("unbindSwipe");Jacked.stopTween(M[0]); M.empty().css("margin-left",0);s&&(s.off(".jackbox"),s&&(P.hide(),Y.show()));F=n=null}lc.each(ed);Jacked.fadeOut(t[0],{duration:1E3,callback:od});u.css({marginLeft:pd,marginTop:qd});B||setTimeout(rd,10);ga&&ga.css("visibility","hidden");Ea&&Ea.removeClass("jackbox-pre-ready");f=R=Ma=ca=Hb=fb=za=Ib=Ba=Ab=null}function rd(){0!==Sa&&nb.animate({scrollTop:Sa},{duration:300,queue:!1})}function od(){t.detach()}function sd(a){!a?vb():wb()}function td(a,b){if(!R&&"success"===b.toLowerCase()&&a){var e=a.length, f=document.URL;for(f.substring(0,f.lastIndexOf("/"));e--;)c("<img />").attr("src",Fc+"/"+a[e].split("../").join(""))}}function ud(){var a=c(this),b=a.next("img"),e=b.attr("src");b.length&&(a=c("<img />").attr({width:b.attr("width"),height:b.attr("height")}).data("parent",a).one("load.jackbox",vd).insertAfter(b),b.remove(),a.attr("src",e))}function vd(){var a=c(this),b=a.data("parent"),e=parseInt(b.css("width"),10)||b.width(),f=parseInt(b.css("height"),10)||b.height(),b=c("<canvas />").addClass("jackbox-canvas-blur").attr({width:e, height:f}).insertBefore(b),f=Date.now(),e=f+1,f=f+2;a.attr("id",e);b.attr("id",f);StackBlurImage(e,f,19)}function wd(){var a=c(this);a.parent().data({tip:a,tipWidth:a.width()-27,tipHeight:a.height()+17}).on("mouseenter.jackbox",xd).on("mouseleave.jackbox",yd)}function xd(){var a=c(this),b=a.offset(),e=a.data();e.tipX=b.left;e.tipY=b.top;e.tip.css({opacity:1,visibility:"visible"});a.on("mousemove.jackbox",Gc)}function yd(){var a=c(this).off("mousemove.jackbox");ka?a.data("tip").css("opacity",0):a.data("tip").css({opacity:0, visibility:"hidden"})}function zd(a){a.stopImmediatePropagation()}function sc(a){c(a.target).is("a")||(a.stopPropagation(),a.preventDefault())}var k={useThumbs:!0,deepLinking:!0,autoPlayVideo:!1,flashVideoFirst:!1,defaultVideoWidth:960,defaultVideoHeight:540,thumbnailWidth:75,thumbnailHeight:50,useThumbTooltips:!0,preloadGraphics:!0,showInfoByDefault:!1,thumbsStartHidden:!1,fullscreenScalesContent:!0,defaultShareImage:"jackbox/img/default_share.jpg"},la=10,ya=2,Fc="jackbox",Ad=Fc+"/php/graphics.php", jd="jackbox/modules/jackbox_swf.html",hd="jackbox/modules/jackbox_video.html",id="jackbox/modules/jackbox_audio.html",gd="http://player.vimeo.com/video{url}?title=0&byline=0&portrait=0&autoplay={autoplay}&color=FFFFFF&wmode=transparent",fd="http://www.youtube.com/embed/{url}?autoplay={autoplay}&autohide=1&hd=1&iv_load_policy=3&showinfo=0&showsearch=0&wmode=transparent",ob='<div class="jackbox-top clearfix"><div class="jackbox-social"></div><div class="jackbox-top-icons"><span class="jackbox-fullscreen"><span class="jackbox-button jackbox-fs"></span><span class="jackbox-button jackbox-ns"></span></span><span class="jackbox-button jackbox-button-margin jackbox-close"></span></div><div />', pb='<div class="jackbox-bottom clearfix"><div class="jackbox-controls"><span class="jackbox-button jackbox-arrow-left"></span><span class="jackbox-button jackbox-arrow-right"></span></div><div class="jackbox-title-text"><span class="jb-current"></span><span class="jb-divider">/</span><span class="jb-total"></span><span class="jackbox-title-txt"></span></div><div class="jackbox-bottom-icons"><span class="jackbox-button jackbox-info"></span><span class="jackbox-button-margin jackbox-button-thumbs"><span class="jackbox-button jackbox-hide-thumbs"></span><span class="jackbox-button jackbox-show-thumbs"></span></span></div></div>', Jb,w,na,pc,qc,Kb,yb,gb,qb,Ma,Hc,Ja,xb,Ic,ga,nc,Ab,Lb,M,p,Mb,X,v,G,Z,P,Y,ja,J,Fb,Ea,Sa,ba,fa,W,xa,Q,ha,ma,Nb,Cb,ub,Ba,Aa,ea,s,sa,ab,ra,Jc,Na,Kc,ta,Ca,q,wa,ua,qa,O,Xa,pa,$a,Lc,B,Wa,hb,Oa,t,x,f,Fa,r,l,h,j,A,I,Mc,E,g,da,D,ka,va,Ob,rc,Ga,n,$b,u,rb,T,ib,Ha,Nc,i,U,Ka,C,K,db,Gb,S,lc,Za,$,H,R,mc,nb,Ya,Ia,ca,F,qd,Hb,Va,N,Pa,eb,V,fb,oc,pd,Oc,za,Pb,Ib,tc,aa,ac,y,vc,Pc,Qc,zb,Bc,Cc,d=1,z=-1,Ta=0,gc=!0,ec=!0,Rc={init:function(a,b){!Oc&&"undefined"!==typeof Jacked&&(b&&c.extend(k,b),Ya=k.useThumbs,N=k.deepLinking, Na=k.useThumbTooltips,tc=k.autoPlayVideo,aa=k.thumbnailWidth,Nc=k.fullscreenScalesContent,y=k.thumbnailHeight,vc=k.flashVideoFirst,Qc=k.showInfoByDefault,zb=k.thumbsStartHidden,Pc=k.defaultShareImage,Bc=k.defaultVideoWidth,Cc=k.defaultVideoHeight,l=document,Oc=!0,$=aa+ya,ib=-1!==l.URL.search("file:///"),k.preloadGraphics&&!ib&&c.getJSON(Ad+"?path=../img/graphics/",td),rb=a,k=null,ka=Jacked.getIE(),B=Jacked.getMobile(),Za=Jacked.getBrowser(),Mc="ie"===Za,"undefined"!==typeof c.address&&N?Mc?(mb(), c.address.update()):c.address.init(mb):(N=!1,mb()),"undefined"!==typeof StackBlurImage&&(!ib&&!ka)&&c(".jackbox-hover-blur").each(ud),c(".jackbox-tooltip").each(wd))},frameReady:function(){R&&La()},newItem:function(a,b){var e=E.length,c=-1,f,d;if(b&&"object"===typeof b){var g,j,i;for(g in b)"trigger"!==g&&(j="data-"+g,i=b[g],a.attr(j,i),"group"===g&&(d=i))}else b=null;d||(d=a.attr("data-group"));if(d){for(d=d.split(" ").join("").toLowerCase();e--;)if(E[e]===d){c=e;break}if(-1<c){d=D[c];-1!==d.indexOf(a)&& (a.trigger("click"),f=!0);if(f)return;e=d.length;d[e]=a}else c=E.length,e=D.length,E[c]=d,Ta++,D[e]=[a],e=0;cc(a);a.data({id:e,cat:c});b&&b.trigger&&a.trigger("click")}}},oa,jb={type:"text/html",frameborder:0,mozallowfullscreen:"mozallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen",allowfullscreen:"allowfullscreen"};oa=function(a,b,e){jb.width=j;jb.height=g;jb.scrolling=!e?"no":"auto";i=c("<iframe />").attr(jb).addClass("jackbox-content").prependTo(xa);if(!b)i.one("load.jackbox",La);i.attr("src", a)};var La,Qb={};La=function(a){a&&a.stopPropagation();Ka&&(T=i.width()||i[0].width,U=i.height()||i[0].height,Dc());Qb.width=j;Qb.height=g;i.css(Qb);Rb(!0);A.on("resize.jackbox",L)};var Rb,ia={},Da={},Qa={};Rb=function(a){if(a){260>j&&(va+=260-j);a=Math.max(j,260);if(a===Ba&&g===Nb){Sb();return}ia.callback=Sb;ia.duration=Ba?50<Math.abs(a-Ba)||50<Math.abs(g-Nb)?600:300:600}else a=j,Qa.width=a,ia.duration=300,delete ia.callback,v&&Jacked.tween(v[0],Qa,ia),w&&Jacked.tween(w[0],Qa,ia),Qa.height=g,Jacked.stopTween(i[0], !0),Jacked.tween(i[0],Qa,ia);Da.marginLeft=-((va>>1)+0.5|0);Da.marginTop=-((Ob>>1)+0.5|0);Da.height=g;Da.width=a;Ba||(Da.opacity=1);Jacked.tween(u[0],Da,ia);Ba=a;Nb=g};var Sb,kb={},Sc={opacity:1,visibility:"visible"};Sb=function(){Tc();Q.removeClass("jackbox-spin-preloader");var a=Math.max(j,260);kb.duration=600;Ka&&!ka?Jacked.fadeIn(i[0],{duration:1E3}):(i.show(),("audio"===S||"local"===S)&&i[0].contentWindow.cjInit());kb.duration=300;ka?(v&&v.css("width",a).show(),w&&w.css("width",a).show()):(v&& (v.css("width",a),Jacked.fadeIn(v[0],kb)),w&&(w.css("width",a),Jacked.fadeIn(w[0],kb)));r&&ab?(r.show(),G.html(ab).show(),Z=-G.outerHeight(),ga.css("height",-Z<g?-Z:g),Qc?(Ca=!0,r.addClass("jb-info-inactive"),G.css("margin-top",0)):(Ca=!1,G.css("margin-top",Z))):r&&(r.hide(),G.hide());Ia=!1;!fb&&O&&(ba.css(Sc),ja.css(Sc));if(!Ib&&Ya&&O){var a=D[z],b=[],e=I,f,d,h,m,k;for(Ib=!0;e--;)h=a[e],h.attr("data-thumbnail")?b[e]=!1:(f=h.children("img"),f.length?(h.attr("data-thumbnail",f.attr("src")),b[e]=f): ("image"===h.data("type")?h.attr("data-thumbnail",h.attr("href")||h.attr("data-href")):h.attr("data-thumbnail","jackbox/img/thumbs/default.jpg"),b[e]=!1));n=[];V||(e=l.createDocumentFragment(),h=y>>1,V=c("<div />").addClass("jackbox-thumb-holder").css("height",y).appendTo(t),p=c("<div />").addClass("jackbox-thumb-panel").css("height",y),X=c("<div />").addClass("jackbox-thumb-right"),W=c("<div />").addClass("jackbox-thumb-left"),e.appendChild(p[0]),e.appendChild(X[0]),e.appendChild(W[0]),V[0].appendChild(e), M=c("<div />").addClass("jackbox-thumb-strip").appendTo(p),W.css("top",h),X.css("top",h));h=l.createDocumentFragment();for(e=0;e<I;e++){d=n[e]=c("<div />").data("id",e).addClass("jackbox-thumb").css({width:aa,height:y,left:$*e}).on("click.jackbox",zc);if(Na&&(f=Va[e].attr("data-thumbTooltip")||Va[e].attr("data-title")))d.data("theTitle",f).on("mouseenter.jackbox",Uc).on("mouseleave.jackbox",wc);h.appendChild(d[0]);f=c("<img />").addClass("jb-thumb").one("load.jackbox",md).appendTo(d);d.data("theThumb", f);b[e]?(d=b[e].attr("width")||b[e].width(),m=b[e].attr("height")||b[e].height()):(d=aa,m=y);d>aa&&m>y&&(k=d>m?aa/d:y/m,d*=k,m*=k,m<y&&(k=(y-m)/y,d+=d*k,m+=m*k),d<aa&&(k=(aa-d)/aa,d+=d*k,m+=m*k),d!==(d|0)&&(d=d+1|0),m!==(m|0)&&(m=m+1|0));f.attr({width:d,height:m,src:a[e].attr("data-thumbnail")})}M[0].appendChild(h);Ic=n.length;Mb=$*e;F=!0;q=0;V.on("click.jackbox",sc).show();Tb();s&&(zb?(Y.hide(),P.show(),V.css("bottom",ea)):(P.hide(),Y.show(),V.css("bottom",0)),s.on("click.jackbox",Vc))}if(!fb){fb= !0;if(na)J.on("click.jackbox",nd);if(sa)sa.one("click.jackbox",kc);if(r)r.on("click.jackbox",Wc);if(O){if(qa)qa.on("click.jackbox",vb);if(pa)pa.on("click.jackbox",wb);if(Na&&p)p.on("mouseenter.jackbox",ld)}}if(O){if(F)for(a=n.length;a--;)n[a].on("click.jackbox",zc);ba.on("click.jackbox",wb);ja.on("click.jackbox",vb);B&&ub&&i.cjSwipe("touchSwipe",sd)}};var Tc,lb={type:"text/html",frameborder:0,mozallowfullscreen:"mozallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen",allowfullscreen:"allowfullscreen", scrolling:"no"};Tc=function(){if(!Jc){Jc=!0;Oa=c(".jb-total");r=c(".jackbox-info");ta=c(".jb-divider");ua=c(".jb-current");sa=c(".jackbox-close");hb=c(".jackbox-title-text");x=c(".jackbox-title-txt");ra=c(".jackbox-controls");pa=c(".jackbox-arrow-left");Pa=c(".jackbox-social");qa=c(".jackbox-arrow-right");s=c(".jackbox-button-thumbs");P=c(".jackbox-show-thumbs");Y=c(".jackbox-hide-thumbs");x.length||(x=null);hb.length||(hb=null);pa.length||(pa=null);ta.length||(ta=null);qa.length||(qa=null);ra.length|| (ra=null);sa.length||(sa=null);Pa.length||(Pa=null);if(!ua.length||!Oa.length)ua=null;na?(c(".jackbox-ns").hide(),J.length||(J=na=null)):J&&J.hide();Ya?s.length&&P.length&&Y.length?P.hide():s=P=Y=null:(s.hide(),s=P=Y=null);r.length?(ga=c("<div />").addClass("jackbox-info-text").appendTo(xa).css("visibility","hidden"),G=c("<div />").addClass("jackbox-description-text").appendTo(ga)):r=null;Na&&(Aa=c("<span />").addClass("jackbox-thumb-tip").css("bottom",y),Kb=c("<span />").addClass("jackbox-thumb-tip-text").text("render me").appendTo(Aa), Aa.appendTo(t),Hc=(parseInt(Aa.css("padding-left"),10)<<1)-(ya<<1))}O||(ra&&ra.hide(),s&&s.hide());if(hb){"false"===fa&&(fa=!1);var a=x&&fa,b=a?" -&nbsp;":"";ua&&O?(ua.text(d+1).show(),Oa.html(I+b).show(),ta&&ta.show()):(Oa&&Oa.hide(),ua&&ua.hide(),ta&&ta.hide());a&&(x.html(Cb),a=x.children("a"),a.length&&(a.on("click.jackbox",zd),x.data("links",a)))}if(Pa&&!ib){var e,a=l.URL.split("#")[0],b=a.length-1;-1!==a.search("/")&&("/"!==a.charAt(b)?(N?e=a+"#/"+da+"/"+(d+1):e=a,a=a.substring(0,a.lastIndexOf("/"))): (a=a.substring(0,b),N?e=a+"/#/"+da+"/"+(d+1):e=a));Ka?b=f.attr("href")||f.attr("data-href"):(b=f.children("img"),b=b.length?b.attr("src"):Pc);-1===b.search("http")&&(b="/"!==b.charAt(0)?a+"/"+b:a+b);lb.width=200;lb.height=21;lb.src="jackbox/modules/jackbox_social.php?url="+encodeURIComponent(e)+"&poster="+b+"&title="+(fa?escape(fa.replace(/(<([^>]+)>)/ig,"")):escape(l.title));eb=c("<iframe />").attr(lb).appendTo(Pa)}};var Wc,Ub={},Vb={duration:300};Wc=function(a){a&&a.stopPropagation();Ca?(Ub.marginTop= Z,Vb.callback=kd,r.removeClass("jb-info-inactive")):(r.addClass("jb-info-inactive"),ga.css("visibility","visible"),Ub.marginTop=0,delete Vb.callback);Jacked.tween(G[0],Ub,Vb);Ca=!Ca};var Uc,Wb={opacity:1,visibility:"visible"};Uc=function(){B&&(clearTimeout(Lc),Lc=setTimeout(wc,2E3));var a=c(this),b,e,d;Kb.text(a.data("theTitle"));b=parseInt(Kb.css("width"),10);d=p.data("offLeft");a=a.offset().left;e=d+p.width()-b-Hc;Wb.width=b;Wb.left=a<d?d:a>e?e:a;Aa.css(Wb)};var Vc,Xc={},Bd={duration:300};Vc=function(a){a.stopPropagation(); 0===ea?(ea=qb,s&&(Y.hide(),P.show())):(ea=0,s&&(P.hide(),Y.show()));Xc.bottom=ea;Jacked.tween(V[0],Xc,Bd);569>C||(L(),Rb())};var Tb,Xb={};Tb=function(a){var b=C-160;Mb<b?(ha=Ic,Pb=!1):(ha=b/$|0,Pb=!0);gb=$*ha-ya;Lb=ha-1;Xb.marginLeft=-(gb>>1)-ya;Xb.width=gb;p.css(Xb);M.css("width",Mb);Bb(a)};var Bb,Yc={},Cd={duration:300};Bb=function(a,b){if(a)q=d,0!==d&&d+ha>I&&(q=I-ha),Jacked.stopTween(M[0]),M.css("left",q*-$);else{if(0===d)q=0;else if(d>q+Lb)for(;d>q+Lb;)q++;b?(Yc.left=q*-$,Jacked.tween(M[0],Yc, Cd)):(Jacked.stopTween(M[0]),M.css("left",q*-$))}bb(a,!1)};var bb,Zc={},Dd={duration:300};bb=function(a,b){W.off(".jackbox");X.off(".jackbox");if(Pb)if(B&&p.cjSwipe("unbindSwipe"),q<I-ha?(X.on("click.jackbox",xc).show(),B&&p.cjSwipe("touchSwipeLeft",xc,!0)):X.hide(),0<q?(W.on("click.jackbox",yc).show(),B&&p.cjSwipe("touchSwipeRight",yc,!0)):W.hide(),b)Zc.left=q*-$,Jacked.tween(M[0],Zc,Dd);else{if(a||!Hb){var c=p.offset().left;W.css("left",c);X.css("left",c+gb);Hb=!0}}else W.hide(),X.hide()};var L, Yb={opacity:1},Ra={};L=function(a){if(Fb)clearTimeout(Jb),Jb=setTimeout(Ec,100);else{C=A.width();K=Math.max(A.height(),226);var b=568<C&&0===ea?yb:0;Kc="audio"!==S&&"html"!==S?!Ma?$a:$a||Nc:!1;if(db<C&&Gb+b<K&&!Kc)j=T,g=U;else{j=C/db;g=K/Gb;var c=j>g?g:j;j=T*c;g=U*c;C>K?g+Wa+b>K&&(g=K-Ja-la-b,j=T*(g/U)):j>g?j+db>C&&(j=C-la,g=U*(j/T)):g+Wa+b>K&&(g=K-Ja-la-b,j=T*(g/U));j!==(j|0)&&(j=j+1|0);g!==(g|0)&&(g=g+1|0)}va=j+xb;Ob=g+Ja+b;a&&(Jacked.stopTween(u[0],!1,!0),i&&Jacked.stopTween(i[0],!0,!0),260>j&& (va+=260-j),a=Math.max(260,j),Yb.width=a,Yb.height=g,Ra.marginLeft=-(0.5*va+0.5|0),Ra.marginTop=-(0.5*Ob+0.5|0),Ra.width=a,Ra.height=g,u.css(Ra),i.css(Yb),w&&(Jacked.stopTween(w[0]),w.css("width",a)),v&&(Jacked.stopTween(v[0]),v.css("width",a)),r&&ab&&(Z=-G.outerHeight(),ga.css("height",-Z<g?-Z:g),Ca||(Jacked.stopTween(G[0],!1,!0),G.css("margin-top",Z))),F&&Tb(!0),Fb=!0,Jb=setTimeout(Ec,100))}};var Gc,Zb={};Gc=function(a){var b=c(this).data();Zb.left=a.pageX-b.tipX-b.tipWidth;Zb.top=a.pageY-b.tipY- b.tipHeight;b.tip.css(Zb)};c.fn.jackBox=function(a,b){if(Rc.hasOwnProperty(a))Rc[a](this,b)};c.jackBox={available:function(a){a&&(ac?N?setTimeout(a,250):a():Ga=a)}}})(jQuery);function jackboxFrameReady(){jQuery.fn.jackBox("frameReady")};